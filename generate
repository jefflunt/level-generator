#!/usr/bin/env ruby
$LOAD_PATH.unshift 'lib'
require 'room'
require 'floor'
require 'merger'

TOKENS = {
  -1 => '.',
  0 => ' ',
  1 => 'X'
}

def format(floor)
  w, h = floor[0..1]
  floor[2..-1].each_slice(w) do |row|
    row.each do |cell|
      print TOKENS[cell]
    end
    puts
  end
end

floor = Generate::Room.gen(4, 6)
floor = Generate::Floor.place(:overwrite, floor, Generate::Room.gen(4, 4), -3, -5)
floor = Generate::Floor.place(:overwrite, floor, Generate::Room.gen(7, 3), 9, 5)
floor = Generate::Floor.place(:merge, floor, Generate::Room.gen(10, 6), 2, 1)
floor = Generate::Floor.pad(floor, 1, 2, 3, 4)
format(floor)
