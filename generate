#!/usr/bin/env ruby
$LOAD_PATH.unshift 'lib'
require 'room'
require 'merger'

TOKENS = {
  -1 => '.',
  0 => ' ',
  1 => 'X'
}

def format(floor)
  w, h = floor[0..1]
  floor[2..-1].each_slice(w) do |row|
    row.each do |cell|
      print TOKENS[cell]
    end
    puts
  end
end

room = Room.rect(4, 6)
format(room)
room = Room.place(:overwrite, room, Room.rect(4, 4), -3, -5)
format(room)
room = Room.place(:overwrite, room, Room.rect(7, 3), 9, 5)
format(room)
room = Room.place(:merge, room, Room.rect(10, 6), 2, 1)
format(room)
room = Room.pad(room, 1, 2, 3, 4)
format(room)
puts "EL: #{Room.empty_lft?(room)}"
puts "ER: #{Room.empty_rgt?(room)}"
puts "ET: #{Room.empty_top?(room)}"
puts "EB: #{Room.empty_bot?(room)}"

room = Room.trim(room)
format(Room.trim(room))
puts "EL: #{Room.empty_lft?(room)}"
puts "ER: #{Room.empty_rgt?(room)}"
puts "ET: #{Room.empty_top?(room)}"
puts "EB: #{Room.empty_bot?(room)}"
